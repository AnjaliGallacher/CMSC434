<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1.0, user-scalable=no"
		/>
		<title>User Profile & Settings - iPad View</title>
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
			rel="stylesheet"
		/>
		<link rel="stylesheet" href="style.css" />
		<style>
			/* Page-specific overrides if necessary */
		</style>
	</head>
	<body>
		<div class="ipad-container">
			<!-- Header -->
			<div class="header transparent-bg">
				<!-- Transparent Header -->
				<!-- No title or icons needed here as settings are below -->
				<div class="header-action"></div>
				<!-- Spacer -->
				<div class="header-action"></div>
				<!-- Spacer -->
			</div>

			<!-- Main Scrollable Content Area -->
			<div class="main-content less-top-padding">
				<!-- Less Top Padding -->
				<!-- Profile Section -->
				<div class="profile-section">
					<div
						class="profile-picture"
						title="Change Profile Picture"
						onclick="changePicture()"
					></div>
					<div class="profile-info">
						<div class="username" id="profileUsername">
							Alex Johnson
						</div>
						<p class="user-bio" id="profileBio">
							Fitness enthusiast exploring hiking trails and
							tracking daily wellness goals. Always aiming for
							consistency!
						</p>
						<button
							class="edit-profile-btn"
							onclick="openEditProfileModal()"
						>
							Edit Profile
						</button>
					</div>
				</div>

				<!-- Stats Section -->
				<div class="stats-section">
					<h2 class="stats-section-header">Activity Summary</h2>
					<div class="profile-stats-grid">
						<!-- Stat boxes remain the same as previous revision -->
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-steps"
									>👣</span
								>
								Daily Steps Avg (Last 7d)
							</div>
							<div class="profile-stat-value">12,830</div>
							<div class="profile-stat-label">Goal: 10,000</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-run"
									>🏃</span
								>
								Weekly Run Distance
							</div>
							<div class="profile-stat-value">
								18.5<span class="profile-stat-unit">Miles</span>
							</div>
							<div class="profile-stat-label">
								3 runs this week
							</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-calories"
									>🔥</span
								>
								Avg Calories Burned (Active)
							</div>
							<div class="profile-stat-value">
								650<span class="profile-stat-unit">kcal</span>
							</div>
							<div class="profile-stat-label">Daily Average</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-strength"
									>🏋️</span
								>
								Strength Workouts
							</div>
							<div class="profile-stat-value">
								3<span class="profile-stat-unit">/ week</span>
							</div>
							<div class="profile-stat-label">
								Avg Duration: 45min
							</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-sleep"
									>🌙</span
								>
								Avg Sleep (Last 7d)
							</div>
							<div class="profile-stat-value">7h 45m</div>
							<div class="profile-stat-label">Quality: 85%</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-water"
									>💧</span
								>
								Water Intake Goal
							</div>
							<div class="profile-stat-value">
								85%<span class="profile-stat-unit">met</span>
							</div>
							<div class="profile-stat-label">
								Avg: 1.7 L / day
							</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-heart"
									>❤️</span
								>
								Resting HR
							</div>
							<div class="profile-stat-value">
								62<span class="profile-stat-unit">bpm</span>
							</div>
							<div class="profile-stat-label">
								Measured Yesterday
							</div>
						</div>
						<div
							class="profile-stat-box clickable"
							onclick="viewAchievements()"
						>
							<div class="profile-stat-header">
								<span
									class="profile-stat-icon icon-achievements"
									>🏆</span
								>
								Achievements
							</div>
							<div class="profile-stat-value">
								25<span class="profile-stat-unit">Earned</span>
							</div>
							<div class="profile-stat-label">View All</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-streak"
									>📅</span
								>
								Activity Streak
							</div>
							<div class="profile-stat-value">
								28<span class="profile-stat-unit">Days</span>
							</div>
							<div class="profile-stat-label">
								Longest: 45 Days
							</div>
						</div>
						<div
							class="profile-stat-box clickable"
							onclick="viewBadges()"
						>
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-badges"
									>🏅</span
								>
								Badges
							</div>
							<div class="profile-stat-value">
								15<span class="profile-stat-unit"
									>Collected</span
								>
							</div>
							<div class="profile-stat-label">
								View Collection
							</div>
						</div>
						<div class="profile-stat-box">
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-weight"
									>⚖️</span
								>
								Weight Trend
							</div>
							<div class="profile-stat-value">
								-1.5<span class="profile-stat-unit">kg</span>
							</div>
							<div class="profile-stat-label">Last 30 Days</div>
						</div>
						<div
							class="profile-stat-box clickable"
							onclick="viewGoals()"
						>
							<div class="profile-stat-header">
								<span class="profile-stat-icon icon-goals"
									>🎯</span
								>
								Current Goals
							</div>
							<div class="profile-stat-value">
								4<span class="profile-stat-unit">Active</span>
							</div>
							<div class="profile-stat-label">Manage Goals</div>
						</div>
					</div>
					<!-- End Grid -->
				</div>
				<!-- End Stats Section -->

				<!-- Settings Section -->
				<div class="settings-section">
					<h2 class="settings-header">Settings</h2>
					<div class="setting-item">
						<span class="setting-label"
							><span class="icon">🎨</span> Dark Mode</span
						>
						<label class="switch">
							<input type="checkbox" id="darkModeToggle" />
							<span class="slider"></span>
						</label>
					</div>
					<div class="setting-item">
						<span class="setting-label"
							><span class="icon">🔔</span> Enable
							Notifications</span
						>
						<label class="switch">
							<input type="checkbox" id="notificationsToggle" />
							<span class="slider"></span>
						</label>
					</div>
					<div class="setting-item">
						<span class="setting-label"
							><span class="icon">⚙️</span> Account Settings</span
						>
						<button
							onclick="navigateTo('account-settings.shtml')"
							style="
								background: none;
								border: none;
								font-size: 24px;
								color: var(--text-tertiary);
								cursor: pointer;
							"
						>
							❯
						</button>
					</div>
				</div>
			</div>
			<!-- End Main Content -->

			<!-- Bottom Navigation Bar -->
			<nav class="bottom-nav" id="bottomNav">
				<a href="todo.shtml" class="nav-item" data-page="home">
					<span class="nav-icon">🏠</span>
					<span class="nav-label">Home</span>
				</a>
				<a href="progress.shtml" class="nav-item" data-page="progress">
					<span class="nav-icon">📊</span>
					<span class="nav-label">Progress</span>
				</a>
				<a href="log-meal.shtml" class="nav-item" data-page="log-meal">
					<span class="nav-icon">🍔</span>
					<span class="nav-label">Log Meal</span>
				</a>
				<a
					href="log-exercise.shtml"
					class="nav-item"
					data-page="log-exercise"
				>
					<span class="nav-icon">🏃</span>
					<span class="nav-label">Log Exercise</span>
				</a>
				<a
					href="profile.shtml"
					class="nav-item active"
					data-page="profile"
				>
					<span class="nav-icon">👤</span>
					<span class="nav-label">Profile</span>
				</a>
			</nav>
		</div>
		<!-- End ipad Container -->

		<!-- Edit Profile Modal -->
		<div class="modal-overlay" id="editProfileModal">
			<div class="modal-content">
				<div class="modal-header">
					<h3 class="modal-title">Edit Profile</h3>
					<button
						class="modal-close-btn"
						onclick="closeEditProfileModal()"
					>
						×
					</button>
				</div>
				<div class="modal-body">
					<div class="input-group">
						<label for="editUsername" class="form-label"
							>Username</label
						>
						<input
							type="text"
							id="editUsername"
							class="form-input"
						/>
					</div>
					<div class="input-group">
						<label for="editBio" class="form-label">Bio</label>
						<textarea
							id="editBio"
							class="form-textarea"
							rows="3"
						></textarea>
						<!-- Use form-textarea -->
					</div>
				</div>
				<div class="modal-actions">
					<button
						class="modal-cancel-btn"
						onclick="closeEditProfileModal()"
					>
						Cancel
					</button>
					<button
						class="modal-save-btn"
						onclick="saveProfileChanges()"
					>
						Save Changes
					</button>
				</div>
			</div>
		</div>

		<script>
			// --- Apply theme early ---
			const htmlElement = document.documentElement;
			const savedTheme = localStorage.getItem("theme") || "light";
			if (savedTheme === "dark") {
				htmlElement.classList.add("dark-mode");
			} else {
				htmlElement.classList.remove("dark-mode");
			}
			// --- End Apply theme early ---

			const darkModeToggle = document.getElementById("darkModeToggle");
			const notificationsToggle = document.getElementById(
				"notificationsToggle"
			);
			const editProfileModal =
				document.getElementById("editProfileModal");

			// --- Dark Mode Logic ---
			function applyTheme(theme) {
				/* ... same code ... */
			}
			function toggleTheme() {
				/* ... same code ... */
			}

			// --- Notifications Logic ---
			function applyNotificationSetting(enabled) {
				/* ... same code ... */
			}
			function toggleNotifications() {
				/* ... same code ... */
			}

			// --- Profile Editing Modal Logic ---
			function openEditProfileModal() {
				document.getElementById("editUsername").value =
					document.getElementById("profileUsername").textContent;
				document.getElementById("editBio").value =
					document.getElementById("profileBio").textContent;
				if (editProfileModal) editProfileModal.classList.add("visible"); // Use class for visibility
			}
			function closeEditProfileModal() {
				if (editProfileModal)
					editProfileModal.classList.remove("visible"); // Use class for visibility
			}
			function saveProfileChanges() {
				/* ... same code ... */
			}

			// --- Mock Navigation/Actions ---
			function changePicture() {
				alert("Open Image Upload/Selection (Implementation Needed)");
			}
			function viewAchievements() {
				alert(
					"Navigate to Achievements Screen (Implementation Needed)"
				);
			}
			function viewBadges() {
				alert("Navigate to Badges Screen (Implementation Needed)");
			}
			function viewGoals() {
				alert(
					"Navigate to Goals Management Screen (Implementation Needed)"
				);
			}
			function navigateTo(url) {
				/* ... same code ... */
			}

			// --- Initial Load ---
			document.addEventListener("DOMContentLoaded", () => {
				// Apply saved theme/settings
				const currentTheme = localStorage.getItem("theme") || "light";
				applyTheme(currentTheme);
				const savedNotifications =
					localStorage.getItem("notificationsEnabled") === "true";
				applyNotificationSetting(savedNotifications);

				// Add event listeners
				if (darkModeToggle)
					darkModeToggle.addEventListener("change", toggleTheme);
				if (notificationsToggle)
					notificationsToggle.addEventListener(
						"change",
						toggleNotifications
					);
				if (editProfileModal) {
					editProfileModal.addEventListener("click", (event) => {
						if (event.target === editProfileModal)
							closeEditProfileModal();
					});
				}

				// Active state for bottom nav
				const bottomNavContainer = document.getElementById("bottomNav");
				if (bottomNavContainer) {
					const navItems =
						bottomNavContainer.querySelectorAll(".nav-item");
					const currentPage =
						window.location.pathname.split("/").pop() ||
						"profile.shtml";
					navItems.forEach((item) => {
						const itemPage = item
							.getAttribute("href")
							?.split("/")
							.pop();
						item.classList.toggle(
							"active",
							itemPage === currentPage
						);
					});
				}
			});
		</script>
	</body>
</html>
